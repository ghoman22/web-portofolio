<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark light">
    <title>Deploying Infrastructure on AWS with Terraform | Firman Arya | Portfolio & Blog</title>
    <meta name="description" content="Learn how to provision secure, scalable cloud infrastructure using Infrastructure as Code principles with Terraform, including best practices and common pitfalls to avoid.">
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" href="../favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" href="../apple-touch-icon.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Fira+Code&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>

<body class="dark">
    <!-- Animated Background Particles -->
    <div class="particles-bg">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <header class="navbar" role="navigation" aria-label="Main Navigation">
        <div class="container nav-container">
            <a href="/" class="nav-logo" aria-label="Firman Arya Home">
                <i class="fas fa-code highlight" aria-hidden="true"></i>
                <span>Firman Arya</span>
            </a>
            <ul class="nav-menu" role="menubar">
                <li><a href="/about" role="menuitem">About</a></li>
                <li><a href="/skills" role="menuitem">Skills</a></li>
                <li><a href="/blogs" role="menuitem" class="active">Blogs</a></li>
                <li><a href="/contact" role="menuitem">Contact</a></li>
            </ul>
            <div class="hamburger" tabindex="0" aria-label="Open navigation menu" aria-controls="nav-menu"
                aria-expanded="false" role="button">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <main>
        <article class="blog-post-redesigned">
            <div class="blog-container">
                <!-- Blog Navigation -->
                <nav class="blog-breadcrumb">
                    <a href="/" class="breadcrumb-link">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <i class="fas fa-chevron-right breadcrumb-separator"></i>
                    <a href="/blogs" class="breadcrumb-link">
                        <i class="fas fa-blog"></i>
                        <span>Blogs</span>
                    </a>
                    <i class="fas fa-chevron-right breadcrumb-separator"></i>
                    <span class="breadcrumb-current">AWS Terraform</span>
                </nav>

                <!-- Blog Layout -->
                <div class="blog-layout">
                    <!-- Main Content -->
                    <div class="blog-main-content">
                        <!-- Blog Header -->
                        <header class="blog-header-redesigned">
                            <div class="blog-category">
                                <i class="fas fa-cloud"></i>
                                <span>Infrastructure & Cloud</span>
                            </div>
                            
                            <h1>Deploying Infrastructure on AWS with Terraform</h1>
                            
                            <div class="blog-meta-redesigned">
                                <div class="blog-author-meta">
                                    <div class="author-avatar">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <div class="author-details">
                                        <span class="author-name">Firman Arya</span>
                                        <span class="author-title">DevOps Engineer</span>
                                    </div>
                                </div>
                                
                                <div class="blog-stats">
                                    <div class="stat-item">
                                        <i class="fas fa-calendar-alt"></i>
                                        <span>December 10, 2024</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-clock"></i>
                                        <span>12 min read</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-eye"></i>
                                        <span>2.1k views</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="blog-tags-redesigned">
                                <span class="tag">Terraform</span>
                                <span class="tag">AWS</span>
                                <span class="tag">IaC</span>
                                <span class="tag">Cloud</span>
                            </div>
                        </header>

                        <!-- Blog Content -->
                        <div class="blog-content-redesigned">
                            <div class="content-intro">
                                <div class="intro-highlight">
                                    <i class="fas fa-lightbulb intro-icon"></i>
                                    <p class="lead">Infrastructure as Code (IaC) has revolutionized how we manage cloud resources. In this comprehensive guide, I'll show you how to deploy secure, scalable infrastructure on AWS using Terraform, sharing best practices learned from managing production environments.</p>
                                </div>
                            </div>

                            <section class="content-section-redesigned" id="why-iac">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">01</span>
                                        Why Infrastructure as Code?
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <p>Traditional infrastructure management through the AWS console or CLI has several limitations that become critical at scale:</p>
                                    
                                    <div class="challenge-list">
                                        <div class="challenge-item">
                                            <i class="fas fa-exclamation-triangle challenge-icon"></i>
                                            <div class="challenge-text">
                                                <h4>Manual Errors</h4>
                                                <p>Manual processes are error-prone and time-consuming, especially in complex environments</p>
                                            </div>
                                        </div>
                                        <div class="challenge-item">
                                            <i class="fas fa-search challenge-icon"></i>
                                            <div class="challenge-text">
                                                <h4>Poor Visibility</h4>
                                                <p>Difficult to track changes and maintain consistency across environments</p>
                                            </div>
                                        </div>
                                        <div class="challenge-item">
                                            <i class="fas fa-code-branch challenge-icon"></i>
                                            <div class="challenge-text">
                                                <h4>No Version Control</h4>
                                                <p>Infrastructure changes aren't tracked or reviewed like application code</p>
                                            </div>
                                        </div>
                                        <div class="challenge-item">
                                            <i class="fas fa-copy challenge-icon"></i>
                                            <div class="challenge-text">
                                                <h4>Hard to Replicate</h4>
                                                <p>Creating identical environments for testing and staging is complex</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="solution-box">
                                        <h4><i class="fas fa-magic"></i> The Terraform Solution</h4>
                                        <p>Terraform solves these problems by allowing us to define infrastructure as code, making it reproducible, version-controlled, and auditable. It brings software development best practices to infrastructure management.</p>
                                    </div>
                                </div>
                            </section>

                            <section class="content-section-redesigned" id="terraform-basics">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">02</span>
                                        Terraform Fundamentals
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <p>Before diving into AWS deployment, let's understand the core concepts that make Terraform powerful:</p>
                                    
                                    <div class="features-grid">
                                        <div class="feature-card">
                                            <div class="feature-icon">
                                                <i class="fas fa-file-code"></i>
                                            </div>
                                            <h3>Declarative Configuration</h3>
                                            <p>Define what you want, not how to achieve it</p>
                                            <div class="feature-details">
                                                <ul>
                                                    <li>HCL (HashiCorp Configuration Language)</li>
                                                    <li>Human-readable syntax</li>
                                                    <li>Infrastructure described as code</li>
                                                    <li>Version control friendly</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <div class="feature-card">
                                            <div class="feature-icon">
                                                <i class="fas fa-sitemap"></i>
                                            </div>
                                            <h3>State Management</h3>
                                            <p>Tracks the current state of your infrastructure</p>
                                            <div class="feature-details">
                                                <ul>
                                                    <li>Remote state storage</li>
                                                    <li>State locking</li>
                                                    <li>Drift detection</li>
                                                    <li>Dependency mapping</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <div class="feature-card">
                                            <div class="feature-icon">
                                                <i class="fas fa-eye"></i>
                                            </div>
                                            <h3>Plan & Apply</h3>
                                            <p>Preview changes before applying them</p>
                                            <div class="feature-details">
                                                <ul>
                                                    <li>Execution plans</li>
                                                    <li>Change preview</li>
                                                    <li>Safe deployments</li>
                                                    <li>Rollback capabilities</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section class="content-section-redesigned" id="aws-setup">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">03</span>
                                        Setting Up AWS Provider
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <p>Let's start by configuring Terraform to work with AWS. Here's the foundation of our infrastructure:</p>
                                    
                                    <div class="code-block-redesigned">
                                        <div class="code-header-redesigned">
                                            <div class="code-info">
                                                <span class="code-language">HCL</span>
                                                <span class="code-filename">main.tf</span>
                                            </div>
                                            <button class="copy-code-btn" onclick="copyCode(this)">
                                                <i class="fas fa-copy"></i>
                                                <span>Copy</span>
                                            </button>
                                        </div>
                                        <div class="code-content">
                                            <pre><code class="language-hcl"># Configure the AWS Provider
terraform {
  required_version = ">= 1.0"
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
  
  # Remote state configuration
  backend "s3" {
    bucket         = "my-terraform-state-bucket"
    key            = "infrastructure/terraform.tfstate"
    region         = "us-west-2"
    encrypt        = true
    dynamodb_table = "terraform-state-lock"
  }
}

# Configure the AWS Provider
provider "aws" {
  region = var.aws_region
  
  default_tags {
    tags = {
      Environment   = var.environment
      Project       = var.project_name
      ManagedBy     = "Terraform"
      CreatedDate   = formatdate("YYYY-MM-DD", timestamp())
    }
  }
}

# Variables
variable "aws_region" {
  description = "AWS region for resources"
  type        = string
  default     = "us-west-2"
}

variable "environment" {
  description = "Environment name"
  type        = string
  default     = "production"
}

variable "project_name" {
  description = "Name of the project"
  type        = string
  default     = "web-app"
}</code></pre>
                                        </div>
                                    </div>
                                    
                                    <div class="solution-box">
                                        <h4><i class="fas fa-info-circle"></i> Key Configuration Points</h4>
                                        <p><strong>Remote State:</strong> Store state in S3 with DynamoDB locking to enable team collaboration and prevent conflicts.</p>
                                        <p><strong>Default Tags:</strong> Automatically tag all resources for better organization and cost tracking.</p>
                                        <p><strong>Version Constraints:</strong> Pin provider versions to ensure reproducible deployments.</p>
                                    </div>
                                </div>
                            </section>

                            <section class="content-section-redesigned" id="vpc-networking">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">04</span>
                                        Building the Network Foundation
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <p>A well-designed VPC is the foundation of secure AWS infrastructure. Let's create a production-ready network setup:</p>
                                    
                                    <div class="architecture-diagram">
                                        <div class="pipeline-stage">
                                            <div class="stage-icon">
                                                <i class="fas fa-network-wired"></i>
                                            </div>
                                            <h4>VPC</h4>
                                            <p>10.0.0.0/16</p>
                                        </div>
                                        <div class="pipeline-arrow">
                                            <i class="fas fa-arrow-right"></i>
                                        </div>
                                        <div class="pipeline-stage">
                                            <div class="stage-icon">
                                                <i class="fas fa-globe"></i>
                                            </div>
                                            <h4>Public Subnets</h4>
                                            <p>Load Balancers</p>
                                        </div>
                                        <div class="pipeline-arrow">
                                            <i class="fas fa-arrow-right"></i>
                                        </div>
                                        <div class="pipeline-stage">
                                            <div class="stage-icon">
                                                <i class="fas fa-shield-alt"></i>
                                            </div>
                                            <h4>Private Subnets</h4>
                                            <p>Application Servers</p>
                                        </div>
                                        <div class="pipeline-arrow">
                                            <i class="fas fa-arrow-right"></i>
                                        </div>
                                        <div class="pipeline-stage">
                                            <div class="stage-icon">
                                                <i class="fas fa-database"></i>
                                            </div>
                                            <h4>Database Subnets</h4>
                                            <p>RDS Instances</p>
                                        </div>
                                    </div>
                                    
                                    <div class="code-block-redesigned">
                                        <div class="code-header-redesigned">
                                            <div class="code-info">
                                                <span class="code-language">HCL</span>
                                                <span class="code-filename">vpc.tf</span>
                                            </div>
                                            <button class="copy-code-btn" onclick="copyCode(this)">
                                                <i class="fas fa-copy"></i>
                                                <span>Copy</span>
                                            </button>
                                        </div>
                                        <div class="code-content">
                                            <pre><code class="language-hcl"># VPC
resource "aws_vpc" "main" {
  cidr_block           = "10.0.0.0/16"
  enable_dns_hostnames = true
  enable_dns_support   = true
  
  tags = {
    Name = "${var.project_name}-vpc"
  }
}

# Internet Gateway
resource "aws_internet_gateway" "main" {
  vpc_id = aws_vpc.main.id
  
  tags = {
    Name = "${var.project_name}-igw"
  }
}

# Public Subnets
resource "aws_subnet" "public" {
  count = length(var.availability_zones)
  
  vpc_id                  = aws_vpc.main.id
  cidr_block              = "10.0.${count.index + 1}.0/24"
  availability_zone       = var.availability_zones[count.index]
  map_public_ip_on_launch = true
  
  tags = {
    Name = "${var.project_name}-public-${count.index + 1}"
    Type = "Public"
  }
}

# Private Subnets
resource "aws_subnet" "private" {
  count = length(var.availability_zones)
  
  vpc_id            = aws_vpc.main.id
  cidr_block        = "10.0.${count.index + 10}.0/24"
  availability_zone = var.availability_zones[count.index]
  
  tags = {
    Name = "${var.project_name}-private-${count.index + 1}"
    Type = "Private"
  }
}

# NAT Gateways
resource "aws_eip" "nat" {
  count = length(var.availability_zones)
  
  domain = "vpc"
  depends_on = [aws_internet_gateway.main]
  
  tags = {
    Name = "${var.project_name}-nat-eip-${count.index + 1}"
  }
}

resource "aws_nat_gateway" "main" {
  count = length(var.availability_zones)
  
  allocation_id = aws_eip.nat[count.index].id
  subnet_id     = aws_subnet.public[count.index].id
  
  tags = {
    Name = "${var.project_name}-nat-${count.index + 1}"
  }
}</code></pre>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section class="content-section-redesigned" id="security-groups">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">05</span>
                                        Security Groups & Best Practices
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <p>Security groups act as virtual firewalls. Here's how to implement them following the principle of least privilege:</p>
                                    
                                    <div class="code-block-redesigned">
                                        <div class="code-header-redesigned">
                                            <div class="code-info">
                                                <span class="code-language">HCL</span>
                                                <span class="code-filename">security-groups.tf</span>
                                            </div>
                                            <button class="copy-code-btn" onclick="copyCode(this)">
                                                <i class="fas fa-copy"></i>
                                                <span>Copy</span>
                                            </button>
                                        </div>
                                        <div class="code-content">
                                            <pre><code class="language-hcl"># ALB Security Group
resource "aws_security_group" "alb" {
  name_prefix = "${var.project_name}-alb-"
  vpc_id      = aws_vpc.main.id
  
  ingress {
    description = "HTTP"
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }
  
  ingress {
    description = "HTTPS"
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }
  
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }
  
  tags = {
    Name = "${var.project_name}-alb-sg"
  }
}

# Application Security Group
resource "aws_security_group" "app" {
  name_prefix = "${var.project_name}-app-"
  vpc_id      = aws_vpc.main.id
  
  ingress {
    description     = "HTTP from ALB"
    from_port       = 80
    to_port         = 80
    protocol        = "tcp"
    security_groups = [aws_security_group.alb.id]
  }
  
  ingress {
    description     = "App Port from ALB"
    from_port       = 3000
    to_port         = 3000
    protocol        = "tcp"
    security_groups = [aws_security_group.alb.id]
  }
  
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }
  
  tags = {
    Name = "${var.project_name}-app-sg"
  }
}

# Database Security Group
resource "aws_security_group" "database" {
  name_prefix = "${var.project_name}-db-"
  vpc_id      = aws_vpc.main.id
  
  ingress {
    description     = "MySQL/Aurora"
    from_port       = 3306
    to_port         = 3306
    protocol        = "tcp"
    security_groups = [aws_security_group.app.id]
  }
  
  tags = {
    Name = "${var.project_name}-db-sg"
  }
}</code></pre>
                                        </div>
                                    </div>
                                    
                                    <div class="benefits-list">
                                        <h3><i class="fas fa-shield-check"></i> Security Best Practices</h3>
                                        <div class="benefit-item">
                                            <i class="fas fa-lock benefit-icon"></i>
                                            <div>
                                                <h4>Principle of Least Privilege</h4>
                                                <p>Only allow the minimum required access between resources</p>
                                            </div>
                                        </div>
                                        <div class="benefit-item">
                                            <i class="fas fa-layer-group benefit-icon"></i>
                                            <div>
                                                <h4>Layered Security</h4>
                                                <p>Multiple security groups for different tiers (web, app, database)</p>
                                            </div>
                                        </div>
                                        <div class="benefit-item">
                                            <i class="fas fa-tags benefit-icon"></i>
                                            <div>
                                                <h4>Descriptive Naming</h4>
                                                <p>Clear, consistent naming conventions for easy identification</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section class="content-section-redesigned" id="compute-resources">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">06</span>
                                        Compute Resources & Auto Scaling
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <p>Let's deploy scalable compute resources using Auto Scaling Groups and Application Load Balancers:</p>
                                    
                                    <div class="code-block-redesigned">
                                        <div class="code-header-redesigned">
                                            <div class="code-info">
                                                <span class="code-language">HCL</span>
                                                <span class="code-filename">compute.tf</span>
                                            </div>
                                            <button class="copy-code-btn" onclick="copyCode(this)">
                                                <i class="fas fa-copy"></i>
                                                <span>Copy</span>
                                            </button>
                                        </div>
                                        <div class="code-content">
                                            <pre><code class="language-hcl"># Launch Template
resource "aws_launch_template" "app" {
  name_prefix   = "${var.project_name}-"
  image_id      = data.aws_ami.amazon_linux.id
  instance_type = var.instance_type
  
  vpc_security_group_ids = [aws_security_group.app.id]
  
  user_data = base64encode(templatefile("${path.module}/user-data.sh", {
    app_name = var.project_name
  }))
  
  tag_specifications {
    resource_type = "instance"
    tags = {
      Name = "${var.project_name}-instance"
    }
  }
  
  lifecycle {
    create_before_destroy = true
  }
}

# Application Load Balancer
resource "aws_lb" "main" {
  name               = "${var.project_name}-alb"
  internal           = false
  load_balancer_type = "application"
  security_groups    = [aws_security_group.alb.id]
  subnets            = aws_subnet.public[*].id
  
  enable_deletion_protection = false
  
  tags = {
    Name = "${var.project_name}-alb"
  }
}

# Target Group
resource "aws_lb_target_group" "app" {
  name     = "${var.project_name}-tg"
  port     = 3000
  protocol = "HTTP"
  vpc_id   = aws_vpc.main.id
  
  health_check {
    enabled             = true
    healthy_threshold   = 2
    interval            = 30
    matcher             = "200"
    path                = "/health"
    port                = "traffic-port"
    protocol            = "HTTP"
    timeout             = 5
    unhealthy_threshold = 2
  }
  
  tags = {
    Name = "${var.project_name}-tg"
  }
}

# Auto Scaling Group
resource "aws_autoscaling_group" "app" {
  name                = "${var.project_name}-asg"
  vpc_zone_identifier = aws_subnet.private[*].id
  target_group_arns   = [aws_lb_target_group.app.arn]
  health_check_type   = "ELB"
  
  min_size         = 2
  max_size         = 10
  desired_capacity = 3
  
  launch_template {
    id      = aws_launch_template.app.id
    version = "$Latest"
  }
  
  tag {
    key                 = "Name"
    value               = "${var.project_name}-asg"
    propagate_at_launch = false
  }
}</code></pre>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section class="content-section-redesigned" id="best-practices">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">07</span>
                                        Production Best Practices
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <div class="lessons-container">
                                        <div class="lesson-card">
                                            <div class="lesson-icon">
                                                <i class="fas fa-folder-tree"></i>
                                            </div>
                                            <h4>Organize Your Code</h4>
                                            <p>Use modules to organize reusable infrastructure components. Separate environments with workspaces or directories.</p>
                                        </div>
                                        <div class="lesson-card">
                                            <div class="lesson-icon">
                                                <i class="fas fa-save"></i>
                                            </div>
                                            <h4>Remote State Management</h4>
                                            <p>Always use remote state with locking. Store state files in S3 with versioning enabled and DynamoDB for locking.</p>
                                        </div>
                                        <div class="lesson-card">
                                            <div class="lesson-icon">
                                                <i class="fas fa-code-branch"></i>
                                            </div>
                                            <h4>Version Everything</h4>
                                            <p>Pin provider versions, use semantic versioning for modules, and maintain a changelog for infrastructure changes.</p>
                                        </div>
                                        <div class="lesson-card">
                                            <div class="lesson-icon">
                                                <i class="fas fa-shield-check"></i>
                                            </div>
                                            <h4>Security First</h4>
                                            <p>Use least privilege access, encrypt data at rest and in transit, and regularly audit your infrastructure.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="solution-box">
                                        <h4><i class="fas fa-rocket"></i> Deployment Workflow</h4>
                                        <p>Implement a CI/CD pipeline for infrastructure changes: <code>terraform plan</code> → Review → <code>terraform apply</code> → Validate</p>
                                    </div>
                                </div>
                            </section>

                            <section class="content-section-redesigned" id="monitoring">
                                <div class="section-header">
                                    <h2>
                                        <span class="section-number">08</span>
                                        Monitoring & Observability
                                    </h2>
                                </div>
                                <div class="section-content">
                                    <p>Don't forget to implement comprehensive monitoring for your infrastructure:</p>
                                    
                                    <div class="results-showcase">
                                        <div class="result-metric">
                                            <div class="metric-value">99.9%</div>
                                            <div class="metric-label">Uptime Target</div>
                                            <div class="metric-description">With proper monitoring</div>
                                        </div>
                                        <div class="result-metric">
                                            <div class="metric-value">< 5min</div>
                                            <div class="metric-label">Alert Response</div>
                                            <div class="metric-description">Automated notifications</div>
                                        </div>
                                        <div class="result-metric">
                                            <div class="metric-value">100%</div>
                                            <div class="metric-label">Infrastructure Visibility</div>
                                            <div class="metric-description">Complete observability</div>
                                        </div>
                                    </div>
                                    
                                    <div class="code-block-small">
                                        <pre><code class="language-hcl"># CloudWatch Alarms
resource "aws_cloudwatch_metric_alarm" "high_cpu" {
  alarm_name          = "${var.project_name}-high-cpu"
  comparison_operator = "GreaterThanThreshold"
  evaluation_periods  = "2"
  metric_name         = "CPUUtilization"
  namespace           = "AWS/EC2"
  period              = "120"
  statistic           = "Average"
  threshold           = "80"
  alarm_description   = "This metric monitors ec2 cpu utilization"
}</code></pre>
                                    </div>
                                </div>
                            </section>
                        </div>

                        <!-- Blog Footer -->
                        <footer class="blog-footer-redesigned">
                            <div class="blog-actions">
                                <div class="action-buttons">
                                    <button class="action-btn like-btn">
                                        <i class="fas fa-heart"></i>
                                        <span>Like</span>
                                        <span class="count">67</span>
                                    </button>
                                    <button class="action-btn bookmark-btn">
                                        <i class="fas fa-bookmark"></i>
                                        <span>Bookmark</span>
                                    </button>
                                    <button class="action-btn share-btn">
                                        <i class="fas fa-share"></i>
                                        <span>Share</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="author-section">
                                <div class="author-card">
                                    <div class="author-avatar-large">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <div class="author-info">
                                        <h3>Firman Arya</h3>
                                        <p class="author-role">DevOps Engineer</p>
                                        <p class="author-bio">Passionate about building scalable infrastructure and engineering CI/CD pipelines that help teams deliver software faster and more reliably. Specializing in cloud-native technologies and automation.</p>
                                        <div class="author-links">
                                            <a href="https://www.linkedin.com/in/firmanaryapradhana/" class="author-link">
                                                <i class="fab fa-linkedin"></i>
                                            </a>
                                            <a href="https://github.com/ghoman22" class="author-link">
                                                <i class="fab fa-github"></i>
                                            </a>
                                            <a href="mailto:firmanap22@gmail.com" class="author-link">
                                                <i class="fas fa-envelope"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="blog-navigation-redesigned">
                                <a href="../blogs.html" class="nav-btn primary">
                                    <i class="fas fa-arrow-left"></i>
                                    <span>See All Blogs</span>
                                </a>
                                <div class="share-options">
                                    <span>Share this post:</span>
                                    <div class="social-share">
                                        <a href="#" class="social-btn linkedin" title="Share on LinkedIn">
                                            <i class="fab fa-linkedin"></i>
                                        </a>
                                        <a href="#" class="social-btn twitter" title="Share on Twitter">
                                            <i class="fab fa-twitter"></i>
                                        </a>
                                        <a href="#" class="social-btn facebook" title="Share on Facebook">
                                            <i class="fab fa-facebook"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </footer>
                    </div>

                    <!-- Sidebar -->
                    <aside class="blog-sidebar">
                        <div class="sidebar-sticky">
                            <!-- Table of Contents -->
                            <div class="sidebar-section">
                                <h3><i class="fas fa-list"></i> Table of Contents</h3>
                                <nav class="table-of-contents">
                                    <a href="#why-iac" class="toc-link active">
                                        <span class="toc-number">01</span>
                                        <span>Why Infrastructure as Code?</span>
                                    </a>
                                    <a href="#terraform-basics" class="toc-link">
                                        <span class="toc-number">02</span>
                                        <span>Terraform Fundamentals</span>
                                    </a>
                                    <a href="#aws-setup" class="toc-link">
                                        <span class="toc-number">03</span>
                                        <span>AWS Provider Setup</span>
                                    </a>
                                    <a href="#vpc-networking" class="toc-link">
                                        <span class="toc-number">04</span>
                                        <span>Network Foundation</span>
                                    </a>
                                    <a href="#security-groups" class="toc-link">
                                        <span class="toc-number">05</span>
                                        <span>Security Groups</span>
                                    </a>
                                    <a href="#compute-resources" class="toc-link">
                                        <span class="toc-number">06</span>
                                        <span>Compute & Auto Scaling</span>
                                    </a>
                                    <a href="#best-practices" class="toc-link">
                                        <span class="toc-number">07</span>
                                        <span>Best Practices</span>
                                    </a>
                                    <a href="#monitoring" class="toc-link">
                                        <span class="toc-number">08</span>
                                        <span>Monitoring</span>
                                    </a>
                                </nav>
                            </div>

                            <!-- Reading Progress -->
                            <div class="sidebar-section">
                                <h3><i class="fas fa-chart-line"></i> Reading Progress</h3>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="reading-progress"></div>
                                    </div>
                                    <div class="progress-text">
                                        <span id="progress-percentage">0%</span> completed
                                    </div>
                                </div>
                            </div>

                            <!-- Related Tags -->
                            <div class="sidebar-section">
                                <h3><i class="fas fa-tags"></i> Related Topics</h3>
                                <div class="related-tags">
                                    <a href="#" class="related-tag">Terraform</a>
                                    <a href="#" class="related-tag">AWS</a>
                                    <a href="#" class="related-tag">Infrastructure as Code</a>
                                    <a href="#" class="related-tag">VPC</a>
                                    <a href="#" class="related-tag">Security Groups</a>
                                    <a href="#" class="related-tag">Auto Scaling</a>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="sidebar-section">
                                <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                                <div class="quick-actions">
                                    <button class="quick-action-btn" onclick="printPage()">
                                        <i class="fas fa-print"></i>
                                        <span>Print Article</span>
                                    </button>
                                    <button class="quick-action-btn" onclick="toggleDarkMode()">
                                        <i class="fas fa-moon"></i>
                                        <span>Toggle Theme</span>
                                    </button>
                                    <button class="quick-action-btn" onclick="increaseFontSize()">
                                        <i class="fas fa-text-height"></i>
                                        <span>Text Size</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </article>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Firman Arya. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button class="scroll-to-top" aria-label="Scroll to top" title="Back to Top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-hcl.min.js"></script>
    <script src="../script.js"></script>
    <script>
        // Copy code functionality
        function copyCode(button) {
            const codeBlock = button.closest('.code-block-redesigned').querySelector('code');
            const text = codeBlock.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i><span>Copied!</span>';
                button.style.background = '#27ca3f';
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.style.background = '';
                }, 2000);
            });
        }

        // Table of contents scroll spy
        function updateTOC() {
            const sections = document.querySelectorAll('.content-section-redesigned');
            const tocLinks = document.querySelectorAll('.toc-link');
            
            let currentSection = '';
            
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 100 && rect.bottom >= 100) {
                    currentSection = section.id;
                }
            });
            
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + currentSection) {
                    link.classList.add('active');
                }
            });
        }

        // Reading progress
        function updateReadingProgress() {
            const article = document.querySelector('.blog-main-content');
            const scrollTop = window.scrollY;
            const docHeight = article.offsetHeight;
            const winHeight = window.innerHeight;
            const scrollPercent = scrollTop / (docHeight - winHeight);
            const scrollPercentRounded = Math.round(scrollPercent * 100);
            
            const progressBar = document.getElementById('reading-progress');
            const progressText = document.getElementById('progress-percentage');
            
            if (progressBar && progressText) {
                progressBar.style.width = Math.min(scrollPercentRounded, 100) + '%';
                progressText.textContent = Math.min(scrollPercentRounded, 100) + '%';
            }
        }

        // Smooth scroll for TOC links
        document.querySelectorAll('.toc-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Event listeners
        window.addEventListener('scroll', () => {
            updateTOC();
            updateReadingProgress();
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateTOC();
            updateReadingProgress();
        });

        // Quick action functions
        function printPage() {
            window.print();
        }

        function toggleDarkMode() {
            document.body.classList.toggle('light');
        }

        function increaseFontSize() {
            const content = document.querySelector('.blog-content-redesigned');
            const currentSize = window.getComputedStyle(content).fontSize;
            const newSize = parseFloat(currentSize) * 1.1;
            content.style.fontSize = newSize + 'px';
        }

        // Interactive action buttons
        document.querySelectorAll('.action-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('active');
                
                if (this.classList.contains('like-btn')) {
                    const count = this.querySelector('.count');
                    const currentCount = parseInt(count.textContent);
                    count.textContent = this.classList.contains('active') ? currentCount + 1 : currentCount - 1;
                }
            });
        });
    </script>
</body>

</html>